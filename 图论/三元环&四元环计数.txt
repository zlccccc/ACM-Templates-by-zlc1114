首先有个定理：
如果按照度数排序(从小往大)，那么每个点往右的边数量最大sqrt个；原因是右边每个点度数都要大于这里, 如果大于sqrt那么总数就超了
x<y<z考虑三元环x->y; y->z; x->z; 枚举所有x->y, 对y直接for这个z, 复杂度就是msqrtm
x<y<y'<z考虑四元环x->y; y->z; x->y', y'->z; 枚举所有x->y然后枚举所有x->y', 对y和y'直接for这个z, 复杂度就是msqrtm

五元环计数的话, 保存一下x->y的长度为2和3的路径数量，然后把不合法的情况(三个点构成一个环，外边又外接了一个)去掉就行了，枚举复杂度是m^2的，或者floyd n^3也行的